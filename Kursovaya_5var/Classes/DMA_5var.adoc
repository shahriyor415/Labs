:toc:
:toc-title: Оглавление

[.text-center]
МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ +
Федеральное государственное автономное образовательное учреждение высшего образования +
«Южно-Уральский государственный университет» +
(национальный исследовательский университет) +
Высшая школа электроники и компьютерных наук +
Кафедра «Информационно-измерительная техника»

[.text-center]

Полный листинг кода класса DMA

[.text-right]
Выполнил: +
студент группы КЭ-413 +
Хайдарзода Ш.Н.

[source, c]
#pragma once
#include "dma2registers.hpp"
template<class D>
class DMA
{
public:
static void ChannelSet()
{
D::S0CR::CHSEL::Value0::Set();
}
static void DirectionSet() // Установка направления
{
D::S0CR::DIR::Value0::Set();
}
static void DataSizeSet() // Установка размера данных
{
D::S0NDTR::NDT::Set(2); // Количество элементов данных для передачи
D::S0CR::MSIZE::Value2::Set(); // Установка размера данных в памяти
D::S0CR::MINC::Value1::Set(); // Режим увеличения памяти
D::S0CR::PSIZE::Value2::Set(); // Размер периферийных данных
D::S0CR::PINC::Value0::Set(); // Периферийный режим приращения
}
static void TargetSet(uint32_t PeriAdrr, uint32_t Pcode) // Установка области памяти, где будут храниться считанные значения
{
D::S0PAR::Set(PeriAdrr); // Запись адреса регистра периферийных данных
D::S0CR::CT::Value0::Set(); // Указание целевую область данных для первой передачи
D::S0M0AR::Set(Pcode); // Установка базового адреса данных, в который будет записываться и считываться данные
}
static void StreamOn()  // Включаем CircularMode, запускаем поток
{
D::S0CR::CIRC::Value1::Set(); // Установка циклического режима DMA
D::S0CR::EN::Value1::Set(); // Включение потока
}
};
